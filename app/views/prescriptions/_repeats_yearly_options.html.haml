%fieldset{ id: 'repeats_yearly_options', class: 'prescription_options'}
  = f.number_field :repeats_every_n_years
  .control-group
    %label.control-label Each
    .controls
      - Prescription::MonthsOfTheYear.each do |month_of_the_year|
        = label_tag "prescription_repeats_yearly_each_months_of_the_year_#{month_of_the_year}", month_of_the_year.humanize, :class => 'checkbox inline' do
          = check_box_tag "prescription[repeats_yearly_each_months_of_the_year][#{month_of_the_year}]", month_of_the_year, f.object.repeats_yearly_each_months_of_the_year.include?(month_of_the_year), {:name => "prescription[repeats_yearly_each_months_of_the_year][]"}
          = month_of_the_year.humanize
      = hidden_field_tag "prescription[repeats_yearly_each_months_of_the_year][]", ""
    = f.check_box :repeats_yearly_on
    #prescription.control-group
      %label.control-label On the
      .controls
        - Prescription::Ordinals.each_with_index do |ordinal,index|
          = label_tag "prescription_repeats_yearly_on_ordinals_#{ordinal}", ordinal, :class => 'checkbox inline' do
            = check_box_tag "prescription[repeats_yearly_on_ordinals][#{ordinal}]", ordinal, f.object.repeats_yearly_on_ordinals.include?(ordinal), {:name => "prescription[repeats_yearly_on_ordinals][]"}
            = Prescription::HumanOrdinals[index]
        = hidden_field_tag "prescription[repeats_yearly_on_ordinals][]", ""
        %hr
        - Prescription::DaysOfTheWeek.each do |day_of_the_week|
          = label_tag "prescription_repeats_yearly_on_days_of_the_week_#{day_of_the_week}", day_of_the_week.humanize, :class => 'checkbox inline' do
            = check_box_tag "prescription[repeats_yearly_on_days_of_the_week][#{day_of_the_week}]", day_of_the_week, f.object.repeats_yearly_on_days_of_the_week.include?(day_of_the_week), {:name => "prescription[repeats_yearly_on_days_of_the_week][]"}
            = day_of_the_week.humanize
        = hidden_field_tag "prescription[repeats_yearly_on_days_of_the_week][]", ""
